language: bash
sudo: false

git:
  depth: false

language: elixir

elixir: '1.8.0'
otp_release: '21.2.2'

services:
  - postgresql

addons:
  postgresql: 10
  apt:
    packages:
      - postgresql-10-postgis-2.4
      - postgresql-10-postgis-2.4-scripts
      - postgresql-client-10

before_script:
  - psql -U postgres -c "create extension postgis"
  - cp config/travis.exs config/test.exs
  - mix do ecto.create, ecto.migrate

env:
  global:
    - MIX_ENV=test
    - PGUSER=postgres
    - PGHOST=""
    - PGPORT=5433

